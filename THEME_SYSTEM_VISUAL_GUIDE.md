# Theme System - Visual Reference Guide

## Motywy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CLASSIC (Default)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Bg:       #050505 â–ˆâ–ˆâ–ˆâ–ˆ                              â”‚
â”‚ Card:     #121212 â–ˆâ–ˆâ–ˆâ–ˆ                              â”‚
â”‚ Text:     #D1D1D1 â–ˆâ–ˆâ–ˆâ–ˆ                              â”‚
â”‚ Accent:   #B22222 â–ˆâ–ˆâ–ˆâ–ˆ (Brick Red)                  â”‚
â”‚ Border:   #262626 â–ˆâ–ˆâ–ˆâ–ˆ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PROFESSIONAL                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Bg:       #000000 â–ˆâ–ˆâ–ˆâ–ˆ (Pure Black)                 â”‚
â”‚ Card:     #0A0A0A â–ˆâ–ˆâ–ˆâ–ˆ                              â”‚
â”‚ Text:     #FFFFFF â–ˆâ–ˆâ–ˆâ–ˆ (Pure White)                 â”‚
â”‚ Accent:   #FFFFFF â–ˆâ–ˆâ–ˆâ–ˆ (Pure White)                 â”‚
â”‚ Border:   #262626 â–ˆâ–ˆâ–ˆâ–ˆ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    METAL                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Bg:       #000000 â–ˆâ–ˆâ–ˆâ–ˆ (Pure Black)                 â”‚
â”‚ Card:     #0A0A0A â–ˆâ–ˆâ–ˆâ–ˆ                              â”‚
â”‚ Text:     #FFFFFF â–ˆâ–ˆâ–ˆâ–ˆ (Pure White)                 â”‚
â”‚ Accent:   #FF0000 â–ˆâ–ˆâ–ˆâ–ˆ (Bright Red)                 â”‚
â”‚ Border:   #330000 â–ˆâ–ˆâ–ˆâ–ˆ (Dark Red)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Architektura Systemu

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  App.jsx                              â”‚
â”‚  <ThemeProvider user={user}>                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                           â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ AppSettings  â”‚          â”‚  Other Pages   â”‚
   â”‚ (useTheme)   â”‚          â”‚  (useTheme)    â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ switchTheme('metal')
          â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Supabase (user_settings)       â”‚
   â”‚  { user_id, theme: 'metal' }    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
LOAD THEME
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. App mounts
   â†“
2. ThemeProvider initializes
   â†“
3. Fetch from DB: SELECT theme FROM user_settings WHERE user_id = ?
   â†“
4. If found: use it, else: create with 'classic'
   â†“
5. Apply class: <html class="theme-metal">
   â†“
6. CSS applies variables: --accent-color: #FF0000


SWITCH THEME
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. User clicks button
   â†“
2. switchTheme('metal') called
   â†“
3. Optimistic: setTheme('metal') - UI updates NOW
   â†“
4. Background: UPDATE user_settings SET theme = 'metal'
   â†“
5. If error: revert theme
   â†“
6. On next load: fetch new theme from DB
```

## Component Tree

```
<App>
  <ToastProvider>
    <ThemeProvider user={user}>
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                             â”‚
      â”‚  Home / CreateWorkout /     â”‚
      â”‚  PR / AppSettings / etc     â”‚
      â”‚                             â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      
      useTheme() available in ANY component below
</ThemeProvider>
</ToastProvider>
</App>
```

## CSS Variables Flow

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  index.css   â”‚
                    â”‚  Variables   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚              â”‚              â”‚
      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
      â”‚ :root      â”‚  â”‚ .theme-  â”‚  â”‚ .theme-   â”‚
      â”‚ (Classic)  â”‚  â”‚professionalâ”‚ metal     â”‚
      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚              â”‚              â”‚
      --bg: #050505   --bg: #000000  --bg: #000000
      --text: #D1D1D1 --text: #FFF   --text: #FFF
      --accent: #B22222 --accent: #FFF --accent: #FF0000
```

## File Structure

```
/home/francuz/mobilegymtrack/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ ThemeContext.jsx          â† NOWY PLIK
â”‚   â”œâ”€â”€ App.jsx                   â† ZMODYFIKOWANY (ThemeProvider)
â”‚   â”œâ”€â”€ AppSettings.jsx           â† ZMODYFIKOWANY (UI)
â”‚   â”œâ”€â”€ index.css                 â† ZMODYFIKOWANY (Variables)
â”‚   â””â”€â”€ ... other components
â”œâ”€â”€ supabase-schema.sql           â† ZMODYFIKOWANY (theme column)
â”œâ”€â”€ THEME_SYSTEM_GUIDE.md         â† PeÅ‚na dokumentacja
â”œâ”€â”€ THEME_SYSTEM_QUICK_START.md   â† Quick start
â”œâ”€â”€ THEME_SYSTEM_API_REFERENCE.md â† API docs
â”œâ”€â”€ THEME_SYSTEM_MIGRATION.sql    â† Migration
â”œâ”€â”€ THEME_SYSTEM_CHECKLIST.md     â† Deploy checklist
â””â”€â”€ THEME_SYSTEM_IMPLEMENTATION_SUMMARY.md â† Ten plik
```

## Usage Examples

```javascript
// Example 1: Get current theme
function Component() {
  const { theme, themeInfo } = useTheme();
  
  return <div>Current: {themeInfo.name}</div>;
  // Output: "Current: Metal"
}

// Example 2: Switch theme
function ThemeSwitcher() {
  const { switchTheme } = useTheme();
  
  return (
    <button onClick={() => switchTheme('professional')}>
      Go Professional
    </button>
  );
}

// Example 3: Use CSS variables
function Styled() {
  return (
    <div style={{
      backgroundColor: 'var(--bg)',
      color: 'var(--text)',
      borderColor: 'var(--border)'
    }}>
      Styled with theme colors
    </div>
  );
}
```

## AppSettings UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Settings                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚ Choose Theme                                     â”‚
â”‚                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Classic    â–¢ â–¢ â–­                         â”‚   â”‚
â”‚ â”‚ (active)   â–¢ â–¢ â–­ (color preview)         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Professional â–¢ â–¢ â–­                       â”‚   â”‚
â”‚ â”‚              â–¢ â–¢ â–­ (color preview)       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Metal       â–¢ â–¢ â–­                        â”‚   â”‚
â”‚ â”‚             â–¢ â–¢ â–­ (color preview)        â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Database Schema

```sql
CREATE TABLE user_settings (
  id              bigint PRIMARY KEY,
  user_id         uuid UNIQUE NOT NULL,
  settings        jsonb DEFAULT '{"language": "en"}',
  theme           text DEFAULT 'classic',    â† NEW
  created_at      timestamp,
  updated_at      timestamp,
  FOREIGN KEY (user_id) REFERENCES auth.users(id)
);
```

## Possible States

```
ThemeProvider States
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[LOADING] â†’ Database query in progress
           Loading state = true
           
[LOADED]  â†’ Theme fetched successfully
           Loading state = false
           Theme = 'classic' | 'professional' | 'metal'
           
[ERROR]   â†’ Database error occurred
           Error message displayed
           Fallback to 'classic'
           
[SYNC]    â†’ Switching theme
           Optimistic update applied
           Background sync to DB
```

## Event Timeline

```
Time  Event                           State
â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
T0    User opens Settings             theme: 'classic'
T1    User clicks "Metal"             theme: 'metal' âš¡ (optimistic)
T2    switchTheme('metal') called     DB sync starts
T3    CSS applies new colors          UI updated
T4    DB query completes              Persisted to DB
T5    User refreshes page             theme: 'metal' (from DB)
T6    User logs in on mobile          theme: 'metal' (synced)
```

## Performance Profile

```
Operation              Time        Impact
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
App startup            ~50ms       Fetch theme
Theme switch (opt)     <1ms        Instant UI
Theme switch (DB)      ~200-500ms  Background
CSS variable apply     <1ms        GPU accelerated
Page refresh           ~50ms       Fetch theme
Cross-device sync      Variable    Network dependent
```

## Browser Compatibility

```
Feature                Chrome  Firefox  Safari  Edge
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CSS Variables          âœ“       âœ“        âœ“       âœ“
React 19               âœ“       âœ“        âœ“       âœ“
LocalStorage           âœ“       âœ“        âœ“       âœ“
Supabase JS            âœ“       âœ“        âœ“       âœ“
Document.class         âœ“       âœ“        âœ“       âœ“
```

## Troubleshooting Flowchart

```
Theme not changing?
  â”œâ”€ Check console (F12)
  â”‚  â””â”€ Errors? â†’ Check supabase connection
  â”œâ”€ Is ThemeProvider in App.jsx? â†’ Add it
  â”œâ”€ Clear cache (Ctrl+Shift+Del)
  â””â”€ Logout and login again

Colors not updating?
  â”œâ”€ Refresh page
  â”œâ”€ Inspect HTML element
  â”‚  â””â”€ Has class="theme-metal"?
  â”œâ”€ Check CSS in DevTools
  â””â”€ Check --bg value exists

Database error?
  â”œâ”€ Run migration SQL
  â”œâ”€ Check if theme column exists
  â”œâ”€ Check RLS policies
  â””â”€ Check supabase status
```

---

**Quick Links:**
- ğŸ“– Full Guide: THEME_SYSTEM_GUIDE.md
- ğŸš€ Quick Start: THEME_SYSTEM_QUICK_START.md
- ğŸ“š API Docs: THEME_SYSTEM_API_REFERENCE.md
- ğŸ—„ï¸ Migration: THEME_SYSTEM_MIGRATION.sql
- âœ… Checklist: THEME_SYSTEM_CHECKLIST.md
